const _timelineIdAttr="data-timeline-id",_timelineScrollClass="timeline-scroll",_timelineScrollSelector=`[${_timelineIdAttr}] ~ .${_timelineScrollClass}`,_trackSelector="[data-timeline-track]",_eventSelector="[data-event-id]",_visTimelineClass="vis-timeline",_visTimelineSelector="."+_visTimelineClass,$visTimelineContainerMarkup=`<div class="${_visTimelineClass}"></div>`,_timelineViewportSelector=`[${_timelineIdAttr}]`,_yearInMs=31536e6,_zoomPaddingInYears=1,_zoomPaddingMobileInYears=3,_mobileBreakpoint=780;function fmtDateString(e){return e.toISOString().split("T",1)[0]}function waitFor(e){let t=i=>{e()?i():setTimeout(()=>t(i),500)};return new Promise(t)}Number.prototype.min=function(e){return this<e?e:this.valueOf()},Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)};let $timelines=[];const fetchTimelines=()=>{$timelines=document.querySelectorAll(_timelineScrollSelector)},visTimelines={};function prepareVisDataItem(e,t){let{startdate:i,enddate:n,stillactive:l}=e.dataset,a={id:t,start:i,content:e};return n?a.end=n:l&&(a.end=fmtDateString(new Date)),a}function getVisDataFromEvents(e){return new vis.DataSet(Array.from(e).map(prepareVisDataItem))}const initTimelines=e=>{e.forEach(function(e){let t=e.querySelectorAll("[data-event-id]");$(e).append($visTimelineContainerMarkup);let i=e.querySelector(_visTimelineSelector),n=getVisDataFromEvents(t),l=2;e.parentElement.dataset?.timelineZoom!==""&&(l=parseInt(e.parentElement.dataset.timelineZoom));let{min:a,max:r}=getMinMaxDatesFromEvents(t),o={horizontalScroll:!0,locale:"de",selectable:!1,showMajorLabels:!0,showMinorLabels:!0,showTooltips:!1,stack:!0,stackSubgroups:!0,zoomable:!1,zoomKey:"ctrlKey",zoomMin:31536e6*l,zoomMax:31536e6*l,groupHeightMode:"fixed",showCurrentTime:!1,limitSize:!1,min:a,max:r},s=new vis.Timeline(i,n,o),m=e.parentElement.querySelector(_timelineViewportSelector).dataset.timelineId;visTimelines[m]=s,s.on("rangechange",function e(t){let i=t.event?.target!==void 0?t.event.target.closest(`.${_timelineScrollClass}`):void 0,n=t.start.getTime(),l=t.end.getTime(),a=Math.round((n+l)/2);Object.keys(visTimelines).forEach(function(e){void 0!==i&&e!==i?.parentElement.querySelector(_timelineViewportSelector).dataset.timelineId&&visTimelines[e].moveTo(a,{animation:{duration:200,easingFunction:"easeInOutQuad"}})})});let c=e.querySelector("[data-timeline-track]");c.style.display="none"})};function getMinMaxDatesFromEvents(e){let t=new Date,i=new Date(0);e.forEach(function(e){let n=new Date(e.dataset.startdate);if(n<t&&(t=n),e.dataset?.enddate!==""&&e.dataset?.enddate!==void 0){let l=new Date(e.dataset.enddate);l>i&&(i=l)}else n>i&&(i=n)});let n=1;return window.innerWidth<=780&&(n=3),t.setFullYear(t.getFullYear()-n),i.setFullYear(i.getFullYear()+n),{min:t,max:i}}const areTimelinesReadyForInit=()=>$timelines.length>0||(setTimeout(fetchTimelines,1e3),!1);waitFor(areTimelinesReadyForInit).then(()=>initTimelines($timelines));//# sourceMappingURL=synced-timelines.min.js.map
