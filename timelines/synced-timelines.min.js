const _timelineIdAttr="data-timeline-id",_timelineScrollClass="timeline-scroll",_timelineScrollSelector=`[${_timelineIdAttr}] ~ .${_timelineScrollClass}`,_trackSelector="[data-timeline-track]",_eventSelector="[data-event-id]",_visTimelineClass="vis-timeline",_visTimelineSelector="."+_visTimelineClass,$visTimelineContainerMarkup=`<div class="${_visTimelineClass}"></div>`,_timelineViewportSelector=`[${_timelineIdAttr}]`,_yearInMs=31536e6,_zoomPaddingInYears=1,_zoomPaddingMobileInYears=3,_mobileBreakpoint=780;function fmtDateString(e){return e.toISOString().split("T",1)[0]}function waitFor(e){let t=i=>{e()?i():setTimeout(()=>t(i),500)};return new Promise(t)}Number.prototype.min=function(e){return this<e?e:this.valueOf()},Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)};let $timelines=[];const fetchTimelines=()=>{$timelines=document.querySelectorAll(_timelineScrollSelector)},visTimelines={};function prepareVisDataItem(e,t){let{startdate:i,enddate:n,stillactive:l}=e.dataset;return{id:t,start:i,end:n||(l?fmtDateString(new Date):void 0),content:e}}const initTimelines=e=>{e.forEach(function(e){let t=e.querySelectorAll("[data-event-id]");$(e).append($visTimelineContainerMarkup);let i=e.querySelector(_visTimelineSelector),n=[...t].map(prepareVisDataItem),l=new vis.DataSet(n),o=2;e.parentElement.dataset?.timelineZoom!==""&&(o=parseInt(e.parentElement.dataset.timelineZoom));let{min:r,max:a}=getMinMaxDatesFromEvents(n),s={horizontalScroll:!0,locale:"de",selectable:!1,showMajorLabels:!0,showMinorLabels:!0,showTooltips:!1,stack:!0,stackSubgroups:!0,zoomable:!1,zoomKey:"ctrlKey",zoomMin:31536e6*o,zoomMax:31536e6*o,groupHeightMode:"fixed",showCurrentTime:!1,limitSize:!1,min:r,max:a},m=new vis.Timeline(i,l,s),c=e.parentElement.querySelector(_timelineViewportSelector).dataset.timelineId;visTimelines[c]=m,m.on("rangechange",function e(t){let i=t.event?.target!==void 0?t.event.target.closest(`.${_timelineScrollClass}`):void 0,n=t.start.getTime(),l=t.end.getTime(),o=Math.round((n+l)/2);Object.keys(visTimelines).forEach(function(e){void 0!==i&&e!==i?.parentElement.querySelector(_timelineViewportSelector).dataset.timelineId&&visTimelines[e].moveTo(o,{animation:{duration:200,easingFunction:"easeInOutQuad"}})})});let d=e.querySelector("[data-timeline-track]");d.style.display="none"})};function getMinMaxDatesFromEvents(e){let t=new Date,i=new Date(0);for(let n of e){let l=new Date(n.start);if(l<t&&(t=l),l>i&&(i=l),n.end){let o=new Date(n.end);o>i&&(i=o)}}let r=1;return window.innerWidth<=780&&(r=3),t.setFullYear(t.getFullYear()-r),i.setFullYear(i.getFullYear()+r),{min:t,max:i}}const areTimelinesReadyForInit=()=>$timelines.length>0||(setTimeout(fetchTimelines,1e3),!1);waitFor(areTimelinesReadyForInit).then(()=>initTimelines($timelines));
